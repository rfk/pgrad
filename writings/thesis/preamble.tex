
\documentclass[a4paper,british,twoside,12pt]{book}

\usepackage{graphics}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{verbatim}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{color}
\usepackage{tikz}
\usepackage{bibentry}
\usepackage[numbers]{natbib}
\usepackage{setspace}
\usepackage{fancyhdr}

\definecolor{black}{rgb}{0,0,0}
\definecolor{lightgrey}{rgb}{0.80,0.80,0.80}

% Page margins etc
\topmargin	-13mm
\headheight     6mm
\oddsidemargin  12mm       %left margin of odd page =28mm +oddsidemargin
\evensidemargin 1mm        %left margin of even page =29mm +evensidemargin
\textheight     245mm      
\textwidth      145mm      %width of text across the page =textwidth -5mm

% Page headers and footers for fancy-style pages
\fancyhf{}
\fancyhead[RO]{\sffamily\bfseries \rightmark}
\fancyhead[LE]{\sffamily\bfseries \leftmark}
\fancyfoot[LE]{
     \fcolorbox{black}{lightgrey}{\bfseries \thepage}}
\fancyfoot[RO]{
     \fcolorbox{black}{lightgrey}{\bfseries \thepage}}
\renewcommand{\headrulewidth}{0.3mm}
\renewcommand{\footrulewidth}{0.3mm}
\renewcommand{\footruleskip}{0mm}
\pagestyle{fancy}                   

% matching footers for plain-style pages
\fancypagestyle{plain}{
\fancyhf{}
\fancyfoot[LE]{
     \fcolorbox{black}{lightgrey}{\bfseries \thepage}}
\fancyfoot[RO]{
     \fcolorbox{black}{lightgrey}{\bfseries \thepage}}
\renewcommand{\headrulewidth}{0mm}
\renewcommand{\footrulewidth}{0.3mm}
\renewcommand{\footruleskip}{0mm}
}

% ensure blank pages are completely blank
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
        \hbox{}
        \vspace*{\fill}
        \thispagestyle{empty}
        \newpage
        \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother


% Proper naming for bibliography
\renewcommand\bibname{References} 

% Redfine default figure placement to "here" (default is {tbp})
\makeatletter
\def\fps@figure{htbp}
\makeatother

% Environment Definitions
\newenvironment{proofsketch}{\begin{proof}[Proof Sketch]}{\end{proof}}
\newtheorem{thm}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{prop}{Proposition}
\newtheorem{example}{Example}
\newtheorem{defn}{Definition}
\newtheorem{defnL}[defn]{Definition}
\newtheoremstyle{thmext}{\topsep}{\topsep}{\itshape}{}{\bfseries}{.}{ }{\thmname{#1}\thmnote{ #3}}
\theoremstyle{thmext}
\newtheorem*{thmext}{Theorem}
\theoremstyle{plain}
\theoremstyle{thmext}
\newtheorem*{lemmaext}{Lemma}
\theoremstyle{plain}

% Pinched from LyX
\newcommand{\noun}[1]{\textsc{#1}}

% Enable fancy chapter headings
\usepackage[Lenny]{fncychap}

